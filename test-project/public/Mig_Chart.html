<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IntelliTech Migration/智能科技平台迁移</title>

<link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet">

<style>
body,
html {
  font-family: arial, sans-serif;

}

div.vis-editable,
div.vis-editable.vis-selected {
  /* custom styling for editable items... */
}

div.vis-readonly,
div.vis-readonly.vis-selected {
  /* custom styling for readonly items... */
  background-color: #ff4500;
  border-color: red;
  color: white;
}
.task-blue { background-color: #2196F3; color: white; }
.task-purple { background-color: #9C27B0; color: white; }
.task-green { background-color: #4CAF50; color: white; }
.task-red { background-color: #F44336; color: white; }
.task-orange { background-color: #FF9800; color: black; }
.task-yellow { background-color: #FFEB3B; color: black; }
.task-teal { background-color: #009688; color: white; }
.task-gray { background-color: #607D8B; color: white; }

</style>

<style>
  :root {
    --primary: #2c3e50;
    --secondary: #3498db;
    --accent: #e74c3c;
    --light: #ecf0f1;
    --dark: #34495e;
  }
  
  body {
    font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
    line-height: 1.6;
    color: #333;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .language-toggle {
    text-align: right;
    margin-bottom: 20px;
  }
  
  .language-btn {
    background: var(--light);
    border: 1px solid var(--secondary);
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    margin-left: 5px;
  }
  
  .language-btn.active {
    background: var(--secondary);
    color: white;
  }
  
  .bilingual-container {
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-bottom: 15px;
  }
  
  .english {
    font-weight: 500;
  }
  
  .chinese {
    color: #666;
    font-size: 0.95em;
  }
  
  .card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .card-header {
    background: var(--primary);
    color: white;
    padding: 15px 20px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .card-header:hover {
    background: var(--dark);
  }
  
  .card-body {
    padding: 0;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }
  
  .card-body-inner {
    padding: 20px;
  }
  
  .card.expanded .card-body {
    max-height: 2000px;
  }
  
  .toggle-icon {
    transition: transform 0.3s ease;
  }
  
  .card.expanded .toggle-icon {
    transform: rotate(180deg);
  }
  
  .tech-pill {
    display: inline-block;
    background: var(--secondary);
    color: white;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    margin-right: 5px;
    margin-bottom: 5px;
  }
  
  .timeline-container {
    margin: 30px 0;
    height: 500px;
  }
  
  .section-title {
    color: var(--primary);
    border-bottom: 2px solid var(--secondary);
    padding-bottom: 10px;
    margin-top: 40px;
    margin-bottom: 15px;
  }
  
  .metric-card {
    background: var(--light);
    padding: 15px;
    border-left: 4px solid var(--accent);
    margin: 15px 0;
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    font-size: 0.95em;
  }
  
  th, td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  
  th {
    background: var(--light);
    font-weight: 600;
  }
  
  tr:hover {
    background-color: #f5f5f5;
  }
  
  .phase-tag {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: bold;
    margin-right: 5px;
  }
  ul.columns-2 {
  columns: 2;
  column-gap: 20px;
}

.card-body-inner h4 {
  color: var(--primary);
  margin-bottom: 10px;
  font-size: 1.1em;
}
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .card-header {
      padding: 12px 15px;
    }
    
    th, td {
      padding: 8px 10px;
    }
    
    .timeline-container {
      height: 400px;
    }
  }
</style>
</head>
<body>
<div id="app">
  <div class="language-toggle">
    <button class="language-btn" :class="{active: language === 'en'}" @click="setLanguage('en')">English</button>
    <button class="language-btn" :class="{active: language === 'zh'}" @click="setLanguage('zh')">中文</button>
  </div>
  
  <!-- Company Background Card -->
<div class="card" :class="{expanded: expandedSections.background}" @click="toggleSection('background')">
  <div class="card-header">
    <h2>{{ language === 'en' ? 'Company Background' : '公司背景' }}</h2>
    <span class="toggle-icon">▼</span>
  </div>
  <div class="card-body">
    <div class="card-body-inner">
      <div class="bilingual-container">
        <div class="english" v-if="language === 'en'">
          <p>As a Senior Software Engineer at a financial technology firm specializing in advanced investor tools, I led a strategic migration of key services to Kubernetes on AWS. One of our flagship offerings was IntelliTech—an advanced analytical platform designed for hands-on, data-driven investors.</p>
          <p>Comparable to Fintel.io but significantly more powerful, IntelliTech aggregated vast datasets and applied proprietary analytics to deliver actionable market insights.</p>
        </div>
        <div class="chinese" v-if="language === 'zh'">
          <p>作为一家专注于高级投资工具金融科技公司的高级软件工程师，我领导了关键服务向AWS Kubernetes的战略迁移。我们的旗舰产品IntelliTech是一个专为实践型数据驱动投资者设计的高级分析平台。</p>
          <p>类似于Fintel.io但功能更强大，IntelliTech聚合海量数据集并应用专有分析技术提供可操作的市场洞察。</p>
        </div>
      </div>

      <h3 class="section-title">{{ language === 'en' ? 'Data Integration' : '数据集成' }}</h3>
      <div class="bilingual-container">
        <div class="english" v-if="language === 'en'">
          <p>Our platform integrated public data sources such as the SEC EDGAR API, api.data.gov, and Data.gov. We enriched this data with our proprietary analytics layer and exposed it through robust APIs and multi-platform interfaces.</p>
        </div>
        <div class="chinese" v-if="language === 'zh'">
          <p>我们的平台集成了SEC EDGAR API、api.data.gov和Data.gov等公共数据源。通过专有分析层增强数据，并通过强大的API和多平台接口提供。</p>
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th>{{ language === 'en' ? 'Feature Category' : '功能类别' }}</th>
            <th>{{ language === 'en' ? 'Key Capabilities' : '核心能力' }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ language === 'en' ? 'Technical Analysis' : '技术分析' }}</td>
            <td>{{ language === 'en' ? 'Pattern recognition (Head & Shoulders, Double Top/Bottom), moving averages' : '模式识别(头肩顶/底，双顶/底)，移动平均线' }}</td>
          </tr>
          <tr>
            <td>{{ language === 'en' ? 'Sentiment Analysis' : '情感分析' }}</td>
            <td>{{ language === 'en' ? 'Social media & news sentiment aggregation' : '社交媒体和新闻情感聚合' }}</td>
          </tr>
          <tr>
            <td>{{ language === 'en' ? 'NLP Interfaces' : '自然语言接口' }}</td>
            <td>{{ language === 'en' ? 'Intelligent bots for Slack/Discord' : 'Slack/Discord智能机器人' }}</td>
          </tr>
        </tbody>
      </table>

      <h3 class="section-title">{{ language === 'en' ? 'Data Sources' : '数据来源' }}</h3>
      <div class="bilingual-container">
        <div class="english" v-if="language === 'en'">
          <p>We processed social media data from Twitter, Reddit, Facebook, Instagram, Snapchat, YouTube, StockTwits, HedgeChatter, and StockGest. For financial news, we analyzed content from The Wall Street Journal, Financial Times, Bloomberg, Forbes, The Economist, and other leading publications.</p>
        </div>
        <div class="chinese" v-if="language === 'zh'">
          <p>我们处理来自Twitter、Reddit、Facebook、Instagram、Snapchat、YouTube、StockTwits等平台的社交媒体数据。金融新闻方面，我们分析华尔街日报、金融时报、彭博社、福布斯、经济学人等领先出版物的内容。</p>
        </div>
      </div>

      <div style="display: flex; gap: 20px; margin-top: 20px;">
        <div style="flex: 1;">
          <h4>{{ language === 'en' ? 'Social Media Sources' : '社交媒体来源' }}</h4>
          <ul style="columns: 2;">
            <li>Twitter</li>
            <li>Reddit</li>
            <li>Facebook</li>
            <li>Instagram</li>
            <li>Snapchat</li>
            <li>YouTube</li>
            <li>StockTwits</li>
            <li>HedgeChatter</li>
          </ul>
        </div>
        <div style="flex: 1;">
          <h4>{{ language === 'en' ? 'Financial News Sources' : '金融新闻来源' }}</h4>
          <ul style="columns: 2;">
            <li>Wall Street Journal</li>
            <li>Financial Times</li>
            <li>Bloomberg</li>
            <li>Forbes</li>
            <li>The Economist</li>
            <li>Barron's</li>
            <li>Investor's Business Daily</li>
            <li>Financial Post</li>
          </ul>
        </div>
      </div>

      <h3 class="section-title">{{ language === 'en' ? 'Migration Rationale' : '迁移背景' }}</h3>
      <div class="bilingual-container">
        <div class="english" v-if="language === 'en'">
          <p>The team initially built IntelliTech using Heroku for rapid prototyping. While this accelerated early development, it created technical debt and vendor lock-in as adoption grew. The migration to AWS Kubernetes aligned our infrastructure with Ardent Financial's enterprise-grade standards.</p>
        </div>
        <div class="chinese" v-if="language === 'zh'">
          <p>团队最初使用Heroku快速原型开发IntelliTech。虽然加速了早期开发，但随着采用率增长导致了技术债务和供应商锁定。迁移到AWS Kubernetes使我们的基础设施符合Ardent Financial的企业级标准。</p>
        </div>
      </div>
    </div>
  </div>
</div>

  <h1>{{ language === 'en' ? 'IntelliTech Platform Migration: Heroku to AWS Kubernetes' : '智能科技平台迁移：从Heroku到AWS Kubernetes' }}</h1>
  
  <!-- Overview Card -->
  <div class="card" :class="{expanded: expandedSections.overview}" @click="toggleSection('overview')">
    <div class="card-header">
      <h2>{{ language === 'en' ? 'Project Overview' : '项目概述' }}</h2>
      <span class="toggle-icon">▼</span>
    </div>
    <div class="card-body">
      <div class="card-body-inner">
        <div class="bilingual-container">
          <div class="english" v-if="language === 'en'">
            <p>As a Senior Cloud Software Engineer, I led the strategic disentanglement of our financial analytics platform from Heroku to AWS Kubernetes. This wasn't just a lift-and-shift—it was a complete architectural refactor underpinned by sound DevOps principles.</p>
          </div>
          <div class="chinese" v-if="language === 'zh'">
            <p>作为高级云软件工程师，我领导了金融分析平台从Heroku到AWS Kubernetes的战略迁移。这不仅是一次简单的搬迁，而是基于DevOps原则的完整架构重构。</p>
          </div>
        </div>
        
        <div class="metric-card">
          <h3>{{ language === 'en' ? 'Key Metrics' : '关键指标' }}</h3>
          <ul>
            <li><strong>{{ language === 'en' ? '40% reduction' : '降低40%' }}</strong> {{ language === 'en' ? 'in cloud operating costs' : '云运营成本' }}</li>
            <li><strong>{{ language === 'en' ? '60% improvement' : '改进60%' }}</strong> {{ language === 'en' ? 'in lead time for changes' : '变更交付时间' }}</li>
            <li><strong>10-person</strong> {{ language === 'en' ? 'cross-functional engineering team' : '跨职能工程团队' }}</li>
            <li><strong>6-month</strong> {{ language === 'en' ? 'migration timeline' : '迁移时间线' }}</li>
          </ul>
        </div>
        
        <h3 class="section-title">{{ language === 'en' ? 'Technical Stack' : '技术栈' }}</h3>
        <div>
          <span class="tech-pill">AWS EKS</span>
          <span class="tech-pill">Docker</span>
          <span class="tech-pill">Helm</span>
          <span class="tech-pill">ArgoCD</span>
          <span class="tech-pill">Istio</span>
          <span class="tech-pill">Prometheus</span>
          <span class="tech-pill">Grafana</span>
          <span class="tech-pill">AWS RDS</span>
          <span class="tech-pill">ElastiCache</span>
          <span class="tech-pill">GitHub Actions</span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Team Structure Card -->
  <div class="card" :class="{expanded: expandedSections.team}" @click="toggleSection('team')">
    <div class="card-header">
      <h2>{{ language === 'en' ? 'Team Structure' : '团队结构' }}</h2>
      <span class="toggle-icon">▼</span>
    </div>
    <div class="card-body">
      <div class="card-body-inner">
        <div class="bilingual-container">
          <div class="english" v-if="language === 'en'">
            <p>We organized our 10-person engineering team into cross-functional squads using Agile Scrum methodology.</p>
          </div>
          <div class="chinese" v-if="language === 'zh'">
            <p>我们采用敏捷Scrum方法，将10人工程团队组织成跨职能小组。</p>
          </div>
        </div>
        
        <h3>{{ language === 'en' ? 'Team Composition' : '团队组成' }}</h3>
        <table>
          <thead>
            <tr>
              <th>{{ language === 'en' ? 'Role' : '角色' }}</th>
              <th>{{ language === 'en' ? 'Count' : '人数' }}</th>
              <th>{{ language === 'en' ? 'Responsibilities' : '职责' }}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ language === 'en' ? 'Backend Engineers' : '后端工程师' }}</td>
              <td>5</td>
              <td>{{ language === 'en' ? 'Service decomposition, API contracts' : '服务分解，API合约' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Frontend Engineers' : '前端工程师' }}</td>
              <td>3</td>
              <td>{{ language === 'en' ? 'UI integration, contract validation' : 'UI集成，合约验证' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'DevOps Engineers' : 'DevOps工程师' }}</td>
              <td>10 (not exclusive to this team/该DevOps职能部门并非本团队独有)</td>
              <td>{{ language === 'en' ? 'Infrastructure as Code, CI/CD' : '基础设施即代码，CI/CD' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'QA Engineer' : '质量保证工程师' }}</td>
              <td>1</td>
              <td>{{ language === 'en' ? 'Test automation, validation' : '测试自动化，验证' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Technical Lead' : '技术负责人' }}</td>
              <td>1</td>
              <td>{{ language === 'en' ? 'Architecture decisions, blocker removal' : '架构决策，消除障碍' }}</td>
            </tr>
          </tbody>
        </table>
        
        <h3 style="margin-top: 25px;">{{ language === 'en' ? 'Agile Toolchain' : '敏捷工具链' }}</h3>
        <table>
          <thead>
            <tr>
              <th>{{ language === 'en' ? 'Tool' : '工具' }}</th>
              <th>{{ language === 'en' ? 'Purpose' : '用途' }}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>JIRA</td>
              <td>{{ language === 'en' ? 'Task tracking and sprint management' : '任务跟踪和冲刺管理' }}</td>
            </tr>
            <tr>
              <td>Confluence</td>
              <td>{{ language === 'en' ? 'Architecture documentation' : '架构文档' }}</td>
            </tr>
            <tr>
              <td>GitHub Actions</td>
              <td>{{ language === 'en' ? 'CI/CD pipelines' : 'CI/CD流水线' }}</td>
            </tr>
            <tr>
              <td>Miro</td>
              <td>{{ language === 'en' ? 'Service decomposition workshops' : '服务分解研讨会' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Migration Timeline Card -->
  <div class="card" :class="{expanded: expandedSections.timeline}" @click="toggleSection('timeline')">
    <div class="card-header">
      <h2>{{ language === 'en' ? 'Migration Timeline' : '迁移时间线' }}</h2>
      <span class="toggle-icon">▼</span>
    </div>
    <div class="card-body">
      <div class="card-body-inner">
        <!-- <div class="timeline-container" id="visualization"></div> -->
        <div class="timeline-container" id="timeline"></div>
      </div>
    </div>
  </div>
  
  <!-- Technical Migration Card -->
  <div class="card" :class="{expanded: expandedSections.technical}" @click="toggleSection('technical')">
    <div class="card-header">
      <h2>{{ language === 'en' ? 'Technical Migration' : '技术迁移' }}</h2>
      <span class="toggle-icon">▼</span>
    </div>
    <div class="card-body">
      <div class="card-body-inner">
        <div class="bilingual-container">
          <div class="english" v-if="language === 'en'">
            <p>We decomposed the monolithic app into well-bounded microservices, each with clear API contracts and containerized deployment.</p>
          </div>
          <div class="chinese" v-if="language === 'zh'">
            <p>我们将单体应用分解为边界清晰的微服务，每个服务都有明确的API合约和容器化部署。</p>
          </div>
        </div>
        
        <h3>{{ language === 'en' ? 'Service Decomposition' : '服务分解' }}</h3>
        <table>
          <thead>
            <tr>
              <th>{{ language === 'en' ? 'Service' : '服务' }}</th>
              <th>{{ language === 'en' ? 'Technology' : '技术' }}</th>
              <th>{{ language === 'en' ? 'Description' : '描述' }}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ language === 'en' ? 'Sentiment API' : '情感分析API' }}</td>
              <td>Python FastAPI</td>
              <td>{{ language === 'en' ? 'NLP and sentiment analysis' : '自然语言处理和情感分析' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Pattern Detection' : '模式识别' }}</td>
              <td>Node.js</td>
              <td>{{ language === 'en' ? 'Technical indicators analysis' : '技术指标分析' }}</td>
            </tr>
      
            <tr>
              <td>{{ language === 'en' ? 'Auth Service' : '认证服务' }}</td>
              <td>Spring Boot + JWT</td>
              <td>{{ language === 'en' ? 'Centralized authentication and SSO' : '集中认证和单点登录' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Portfolio Service' : '投资组合服务' }}</td>
              <td>Spring Boot</td>
              <td>{{ language === 'en' ? 'User portfolio management and analytics' : '用户投资组合管理与分析' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Data Aggregator' : '数据聚合器' }}</td>
              <td>Spring Cloud</td>
              <td>{{ language === 'en' ? 'Market data collection and normalization' : '市场数据收集与标准化' }}</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Notification Service' : '通知服务' }}</td>
              <td>Spring Boot + WebSocket</td>
              <td>{{ language === 'en' ? 'Real-time alerts and messaging' : '实时警报与消息推送' }}</td>
            </tr>
          </tbody>
        </table>
        
        <h3 style="margin-top: 25px;">{{ language === 'en' ? 'Data Migration' : '数据迁移' }}</h3>
        <table>
          <thead>
            <tr>
              <th>{{ language === 'en' ? 'Component' : '组件' }}</th>
              <th>{{ language === 'en' ? 'Source' : '源' }}</th>
              <th>{{ language === 'en' ? 'Target' : '目标' }}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ language === 'en' ? 'Database' : '数据库' }}</td>
              <td>Heroku Postgres</td>
              <td>AWS RDS PostgreSQL</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Cache' : '缓存' }}</td>
              <td>Heroku Redis</td>
              <td>AWS ElastiCache</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Scheduled Jobs' : '定时任务' }}</td>
              <td>Heroku Scheduler</td>
              <td>Kubernetes CronJobs</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Challenges Card -->
  <div class="card" :class="{expanded: expandedSections.challenges}" @click="toggleSection('challenges')">
    <div class="card-header">
      <h2>{{ language === 'en' ? 'Challenges & Solutions' : '挑战与解决方案' }}</h2>
      <span class="toggle-icon">▼</span>
    </div>
    <div class="card-body">
      <div class="card-body-inner">
        <table>
          <thead>
            <tr>
              <th>{{ language === 'en' ? 'Challenge' : '挑战' }}</th>
              <th>{{ language === 'en' ? 'Solution' : '解决方案' }}</th>
              <th>{{ language === 'en' ? 'Technology Used' : '使用技术' }}</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ language === 'en' ? 'Configuration management' : '配置管理' }}</td>
              <td>{{ language === 'en' ? 'Centralized secrets with AWS Secrets Manager' : '使用AWS密钥管理器集中管理密钥' }}</td>
              <td>AWS Secrets Manager</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Stateful services HA' : '有状态服务高可用' }}</td>
              <td>{{ language === 'en' ? 'Redis Sentinel for automatic failover' : '使用Redis Sentinel实现自动故障转移' }}</td>
              <td>Redis Sentinel</td>
            </tr>
            <tr>
              <td>{{ language === 'en' ? 'Progressive rollout' : '渐进式发布' }}</td>
              <td>{{ language === 'en' ? 'Canary deployments with Flagger' : '使用Flagger进行金丝雀发布' }}</td>
              <td>Flagger + Istio</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
  <!-- Results Card -->
  <div class="card" :class="{expanded: expandedSections.results}" @click="toggleSection('results')">
    <div class="card-header">
      <h2>{{ language === 'en' ? 'Results & Outcomes' : '结果与成果' }}</h2>
      <span class="toggle-icon">▼</span>
    </div>
    <div class="card-body">
      <div class="card-body-inner">
        <div class="metric-card">
          <h3>{{ language === 'en' ? 'Quantitative Results' : '量化结果' }}</h3>
          <table>
            <thead>
              <tr>
                <th>{{ language === 'en' ? 'Metric' : '指标' }}</th>
                <th>{{ language === 'en' ? 'Improvement' : '改进' }}</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{{ language === 'en' ? 'Cloud costs' : '云成本' }}</td>
                <td>{{ language === 'en' ? '40% reduction' : '降低40%' }}</td>
              </tr>
              <tr>
                <td>{{ language === 'en' ? 'Deployment frequency' : '部署频率' }}</td>
                <td>{{ language === 'en' ? '3x increase' : '提高3倍' }}</td>
              </tr>
              <tr>
                <td>{{ language === 'en' ? 'Incident recovery' : '故障恢复' }}</td>
                <td>{{ language === 'en' ? '60% faster MTTR' : 'MTTR加快60%' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <h3>{{ language === 'en' ? 'Strategic Outcomes' : '战略成果' }}</h3>
        <ul>
          <li>{{ language === 'en' ? 'Established DevSecOps culture' : '建立了DevSecOps文化' }}</li>
          <li>{{ language === 'en' ? 'Future-proof architecture' : '面向未来的架构' }}</li>
          <li>{{ language === 'en' ? 'Improved developer autonomy' : '提高了开发人员自主权' }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<h1 style="text-align: center;">📡 Microservices Architecture: Post-Migration</h1>
<architecture-diagram></architecture-diagram>

<!-- <script src="./js/libs/vis-timeline-graph2d.min.js"></script> -->
<!-- <script src="https://cdpn.io/cpe/boomboom/pen.js?key=pen.js-7be91697-d4b2-6915-eddb-7671ee8fea54" ></script> -->
<script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.min.js"></script>
<script src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true });
</script>
<script>
  const { createApp, ref, watch, onMounted } = Vue;
  
  createApp({
    setup() {
      const expandedSections = ref({
        overview: true,
        background:false,

        team: false,
        timeline: false,
        technical: false,
        challenges: false,
        results: false
      });
      
      const language = ref('en');
      
      const setLanguage = (lang) => {
        language.value = lang;
        document.documentElement.lang = lang;
      };
      
      const toggleSection = (section) => {
        expandedSections.value[section] = !expandedSections.value[section];
      };
      
      // Initialize timeline when component mounts
      onMounted(() => {
        initTimeline();
      });
      
      const initTimeline = () => {
        const container = document.getElementById('timeline');
        if (!container) return;
        
        // Timeline items with bilingual support
        const items = new vis.DataSet([
          // Phase 1 - Discovery
          {
        id: 1,
        content: "Audit Heroku Deployments",
        contentCN: "Heroku部署审核",
        start: "2022-01-03", end: "2022-01-07",
        group: 1, className: "task-blue",
        title: "Map dynos, add-ons, environment",
        titleCN: "映射dynos、附加组件、环境变量"
      },
      {
        id: 2,
        content: "Service Decomposition",
        contentCN: "服务分解",
        start: "2022-01-10", end: "2022-01-14",
        group: 1, className: "task-blue",
        title: "Define microservice boundaries using Miro",
        titleCN: "使用Miro定义微服务边界"
      },
      {
        id: 3,
        content: "Agile Planning & Sprint Setup",
        contentCN: "敏捷规划与冲刺设置",
        start: "2022-01-17", end: "2022-01-19",
        group: 1, className: "task-purple",
        title: "Jira setup, backlog grooming, git strategy",
        titleCN: "Jira设置、待办事项梳理、Git策略"
      },

      // Phase 2
      {
        id: 4,
        content: "Provision EKS Clusters",
        contentCN: "配置EKS集群",
        start: "2022-01-24", end: "2022-01-28",
        group: 2, className: "task-green",
        title: "VPC + Staging/Prod Kubernetes",
        titleCN: "VPC + 预发/生产Kubernetes"
      },
      {
        id: 5,
        content: "Install Istio, ArgoCD, cert-manager",
        contentCN: "安装Istio, ArgoCD, cert-manager",
        start: "2022-01-31", end: "2022-02-04",
        group: 2, className: "task-green",
        title: "Add core cluster components",
        titleCN: "添加核心集群组件"
      },

      // Phase 3
      {
        id: 6,
        content: "Sentiment API Refactor",
        contentCN: "情感分析API重构",
        start: "2022-02-07", end: "2022-02-11",
        group: 3, className: "task-red",
        title: "Wrap NLP + Sentiment analysis in container",
        titleCN: "将NLP和情感分析封装至容器"
      },
      {
        id: 7,
        content: "Pattern Detection Microservice",
        contentCN: "模式识别微服务",
        start: "2022-02-14", end: "2022-02-18",
        group: 3, className: "task-red",
        title: "Technical indicators + pattern detection",
        titleCN: "技术指标与模式识别"
      },
      {
        id: 8,
        content: "Auth Service Rebuild",
        contentCN: "身份验证服务重构",
        start: "2022-02-21", end: "2022-02-25",
        group: 3, className: "task-red",
        title: "JWT & preferences store",
        titleCN: "JWT与偏好设置存储"
      },
      {
        id: 9,
        content: "Secrets & Helm",
        contentCN: "密钥管理与Helm",
        start: "2022-02-28", end: "2022-03-04",
        group: 3, className: "task-orange",
        title: "Helm charts, secrets from AWS Secrets Manager",
        titleCN: "Helm图表、AWS密钥管理器集成"
      },
      {
        id: 10,
        content: "Staging UAT",
        contentCN: "预发环境测试",
        start: "2022-03-07", end: "2022-03-11",
        group: 3, className: "task-yellow",
        title: "Smoke test & regression in staging",
        titleCN: "预发环境冒烟测试与回归测试"
      },

      // Phase 4
      {
        id: 11,
        content: "Redis Migration",
        contentCN: "Redis迁移",
        start: "2022-03-14", end: "2022-03-18",
        group: 4, className: "task-teal",
        title: "Redis to ElastiCache",
        titleCN: "迁移至ElastiCache"
      },
      {
        id: 12,
        content: "Mongo Migration to Atlas",
        contentCN: "MongoDB迁移至Atlas",
        start: "2022-03-21", end: "2022-03-25",
        group: 4, className: "task-teal",
        title: "Mongo with VPC peering",
        titleCN: "VPC对等连接配置"
      },
      {
        id: 13,
        content: "ETL to AWS Batch",
        contentCN: "ETL迁移至AWS Batch",
        start: "2022-03-28", end: "2022-04-01",
        group: 4, className: "task-teal",
        title: "Heroku Scheduler → AWS CronJobs",
        titleCN: "Heroku调度器迁移至AWS定时任务"
      },
      {
        id: 14,
        content: "Pen Testing & WAF",
        contentCN: "渗透测试与WAF",
        start: "2022-04-04", end: "2022-04-08",
        group: 4, className: "task-gray",
        title: "Security testing, Web Application Firewall",
        titleCN: "安全测试与Web应用防火墙"
      },
      {
        id: 15,
        content: "Resilience + Circuit Breakers",
        contentCN: "弹性与熔断机制",
        start: "2022-04-11", end: "2022-04-15",
        group: 4, className: "task-gray",
        title: "Istio fallback & SLO alerts",
        titleCN: "Istio回退与服务等级目标警报"
      },

      // Phase 5
      {
        id: 16,
        content: "Setup Flagger",
        contentCN: "配置Flagger",
        start: "2022-04-18", end: "2022-04-22",
        group: 5, className: "task-green",
        title: "Progressive rollout configuration",
        titleCN: "渐进式发布配置"
      },
      {
        id: 17,
        content: "Canary Phased Rollout",
        contentCN: "金丝雀分阶段发布",
        start: "2022-04-25", end: "2022-04-29",
        group: 5, className: "task-green",
        title: "10% → 25% → 100% traffic",
        titleCN: "10% → 25% → 100%流量切换"
      },
      {
        id: 18,
        content: "Shadow Traffic Validation",
        contentCN: "影子流量验证",
        start: "2022-05-02", end: "2022-05-06",
        group: 5, className: "task-green",
        title: "Compare responses from Heroku & EKS",
        titleCN: "对比Heroku与EKS响应"
      },

      // Phase 6
      {
        id: 19,
        content: "DNS Switch & Cutover",
        contentCN: "DNS切换与迁移",
        start: "2022-05-09", end: "2022-05-13",
        group: 6, className: "task-purple",
        title: "Switch DNS to ALB Ingress",
        titleCN: "DNS切换至ALB入口"
      },
      {
        id: 20,
        content: "Heroku Decommissioning",
        contentCN: "Heroku退役",
        start: "2022-05-16", end: "2022-05-20",
        group: 6, className: "task-purple",
        title: "Remove secrets, revoke access, archive logs",
        titleCN: "移除密钥、撤销访问、归档日志"
      },
      {
        id: 21,
        content: "Retrospective & Cost Review",
        contentCN: "回顾与成本分析",
        start: "2022-05-23", end: "2022-05-27",
        group: 6, className: "task-blue",
        title: "Capture lessons learned",
        titleCN: "总结经验教训"
      }
        ]);
        
        // Groups configuration
        const groups = [
          { id: 1, content: "Phase 1: Discovery & Planning" },
          { id: 2, content: "Phase 2: Infra Setup (Kubernetes on AWS)" },
          { id: 3, content: "Phase 3: Service Decomposition" },
          { id: 4, content: "Phase 4: Data Migration & Hardening" },
          { id: 5, content: "Phase 5: Canary & Testing" },
          { id: 6, content: "Phase 6: Cutover & Wrap-up" },
        ];

        const template = (item) => {
          return `
        <div class="bilingual">
          <div class="english">${item.content}</div>
          <div class="chinese">${item.contentCN}</div>
        </div>
      `;
        };
        // Timeline options

        

        const options = {
          template,
          stack: true,
          groupOrder: 'id',
          editable: false,
          start: '2022-01-01',
          end: '2022-06-30',
          orientation: 'top',
          showCurrentTime: false,
          tooltip: {
            followMouse: true,
            overflowMethod: 'cap',
            template: (item) => `
          <div class="bilingual-tooltip">
            <strong>${item.content}</strong><br>
            ${item.title}<hr>
            <strong>${item.contentCN}</strong><br>
            ${item.titleCN}
          </div>
        `
          },
          margin: { item: 5 },
          zoomMin: 1000 * 60 * 60 * 24 * 7, // 1 week
          zoomMax: 1000 * 60 * 60 * 24 * 60, // 2 months
        };


        new vis.Timeline(container, items, groups, options);
      };
      
      // Reinitialize timeline when language changes
      watch(language, () => {
        initTimeline();
      });
      
      return {
        expandedSections,
        language,
        setLanguage,
        toggleSection,
        initTimeline
      };
    }
  }).mount('#app');
</script>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

  mermaid.initialize({
    startOnLoad: false,
    securityLevel: 'loose', // allow SVG injection into shadow DOM
    theme: 'default',
  });

  class ArchitectureDiagram extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
    }

    connectedCallback() {
      const style = `
        <style>
          :host {
            display: block;
            margin: 2rem auto;
            font-family: 'Segoe UI', sans-serif;
            max-width: 100%;
          }
          .diagram-container {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
          }
        </style>
      `;

      const graphDefinition = `
        graph TD
          User["👤 User"] -->|HTTPS| ALB["AWS Application Load Balancer"]
          ALB --> UI_Pods["UI Pods (React/Next.js)"]
          UI_Pods -->|Static Content| S3["Amazon S3 (Assets)"]
          UI_Pods -->|REST/gRPC| Gateway["API Gateway (Ingress Controller)"]
          Gateway --> MS_1["📦 Auth Service (Spring Boot)"]
          Gateway --> MS_2["📦 Portfolio Service (Spring Boot)"]
          Gateway --> MS_3["📦 Sentiment Analyzer (NLP Service)"]
          Gateway --> MS_4["📦 Chatbot Interface (NLP Intent Matching)"]
          Gateway --> MS_5["📦 WebRTC Signaling Service"]
          MS_1 --> MongoDB["MongoDB Atlas"]
          MS_2 --> MongoDB
          MS_3 --> Redis["Redis Cache"]
          MS_4 --> Redis
          MS_1 --> Kafka["Apache Kafka (Event Streaming)"]
          MS_2 --> Kafka
          MS_3 --> Kafka
          Kafka --> Analytics["📊 Data Lake / Analytics Pipeline"]
          MS_5 --> Janus["Janus Gateway (WebRTC SFU)"]
          Janus --> STUN["STUN Server (NAT Traversal)"]
          Janus --> TURN["TURN Server (Relay Fallback)"]
          subgraph Monitoring
            Prometheus["Prometheus (Metrics)"] --> Grafana["Grafana (Dashboards)"]
            Janus --> Prometheus
            Kafka --> Prometheus
            Gateway --> Prometheus
          end
          DevTeam["👩‍💻 Dev Team"] --> Git["Bitbucket (Git Repo)"]
          Git --> CI_CD["CI/CD Pipelines (Jenkins + GitHub Actions)"]
          CI_CD --> K8s["EKS (Kubernetes Cluster)"]
          K8s -->|Auto-Scaling Pods| HPA["Horizontal Pod Autoscaler"]
          K8s -->|Manages| UI_Pods
          K8s --> Gateway
          K8s --> Janus
          K8s --> MS_1
          K8s --> MS_2
          K8s --> MS_3
          K8s --> MS_4
          K8s --> MS_5
      `;

      // Render Mermaid to SVG string and inject into Shadow DOM
      mermaid.render('architectureDiagram', graphDefinition).then(({ svg }) => {
        const container = document.createElement('div');
        container.classList.add('diagram-container');
        container.innerHTML = style + svg;
        this.shadowRoot.appendChild(container);
      });
    }
  }

  customElements.define('architecture-diagram', ArchitectureDiagram);
</script>